看了一些相关文章，写的很棒，感谢这些乐于分享的前辈们，学习到了很多。我也为了梳理学习所得，记录下大概内容。

**对称加密&非对称加密**

首先要搞了解**对称加密、非对称加密**，这个可以去看下李永乐老师[视频](https://www.youtube.com/watch?v=D_kMadCtKp8)以及阮一峰老师[笔记](http://www.ruanyifeng.com/blog/2006/12/notes_on_cryptography.html)。我把李永乐老师讲的例子简单搬运下来助了解：

> ①对称加密
>
> 对称加密是以前比较常见的一种加密方式。所谓对称加密的意思是说，假如有一个人 Alice 她想把一个信号 m 传递给 Bob，她不能直接把这个信号告诉 Bob，否则的话可能会有人窃听，于是通过**一些算法**，比如说通过加一个数字 e 变成一个新的数字 C，她把数字 C 传递给 Bob，Bob接到 C 之后再减去这个 e 就会得到原来的数字 m。
>
> 这个 m 我们称之为**明文**，就是希望我们希望表达的含义。这个 C 我们称之为**密文**，就是我们可以公开传递的一个信息。这个 e 称之为秘钥，是需要保密的，不能告诉其他人。
>
> ②非对称加密
>
> Alice 想把一个信息 m 传递给 Bob，那么首先 Bob 干这么一件事，Bob 生成两个**有相互关系**的数字，这两个有相关关系的数字，一个叫做 e（**公钥**），一个叫做 d（**私钥**），然后 Bob 先把这个 e 传递给 Alice，可以通过公开的方式，然后 Alice 通过公钥的**某一个算法**得到一个密文 C，然后 Alice 再通过公开的方式把这个密文告诉 Bob，这里就体现出“不对称”了。通过密文求解原文的过程不是减 e 而是减 d，通过减 d 的方法，我们就可以得到一个明文，这个明文叫 m。
>
> 也就是说这个 d 和 e 是有一定关系的，我经加密的时候我用 e 这个数字进行加密，但是我解密的时候用 d 数字进行解密，我传递公钥给你的过程我不怕你窃听，因为就算你窃听了，你也不知道我这个私钥是什么，所以你窃听了我的公钥和密文之后，你依然无法得到明文。——这就是非对称的加密方式。



**数字签名、数字证书、CA证书**

以下以读完阮一峰老师[数字签名是什么？](http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html) 大概的理解，不知道没木有错。

假设有两个人 A 和 B。A 与 B 如何进行安全保密的通信呢？大概讲下。

1、先看看 B 写信给 A，A 回信给 B 这样一个过程：

写信：A 要先产生自己的**公钥私钥**对，公钥可以给 B 以及其他任何人（即可以对外公开），但私钥只能自己保留（不能泄露）。B 有了 A 的公钥就可以用该公钥加密信的内容给发送给 A 了，然后 A 用他的私钥解密，只有 A 有他自己私钥，所以只有 A 才能解密信的内容。A 现在需要回信给 B 了。回信过程是怎样的呢？（类比：“服务器--->浏览器”传送服务器上的公钥）

回信：A 给 B 回信决定采用「**数字签名**」。A 这样做，先把回信内容用 Hash 函数生成信的摘要，然后 **A 使用他的私钥**对这个摘要加密，生成「数字签名」。A 讲这个数字签名及信一起发送给 B，B 收到信后，取下数字签名，**用 A 的公钥**解密，得到信的摘要，由此证明，这封信确实是 A 发出的。B 再对信件本身使用 Hash 函数，将得到的结果，与上一步得到的摘要进行对比，如果两者一致，就证明这封信未被修改过。（类比：浏览器得验证服务器是不是真实服务器，服务器传送过来的数据是否有被修改）

（可以看到 A 给 B 回信过程，B 要验证：①这封信确实是A发给我的；②A发给我的信内容没被修改）

这里有个问题：如何保证 **A 的公钥**安全给到 B？这里会存在被窃的可能。比如，B 得到的公钥不是 A 的，而是某个窃者 C 的公钥，而 B 傻乎乎以为自己手里的一直就是 A 的公钥。这样的话，窃者 C 就可以伪装成 A 了，C 就可以按照上面 A 回信的过程给 B 回信了，B 还以为一直是和 A “通信”呢！

**所以这里得解决 A 的公钥安全给到 B 或者说证明 B 拿到的公钥就是 A 的公钥！**

这里就引入除了“**证书授权中心**”（certificate authority，简称**CA**），为公钥做认证。**证书授权中心用自己的私钥**，对 A 的**公钥和一些相关信息一起加密**，生成"**数字证书**"（Digital Certificate）。A 拿到数字证书以后，就可以放心了。以后再给 B 写信，只要在签名的同时，再附上数字证书就行了。（服务器从“证书授权中心”拿到数字证书，也即，服务器从 CA 那申请到了 **CA 证书**）B 收信后，用 **CA 的公钥解开数字证书**，就可以拿到 A 真实的公钥了，然后就能证明"数字签名"是否真的是 A 签的。

PS：从浏览器访问网站角度来看，其实就是这样，我们以访问知乎网站为例。知乎网站去 CA 申请到 CA 证书，这个 CA 证书把 **CA 的私钥**对**知乎网站的公钥及相关信息**进行了加密。知乎网站用自己的私钥加密网页连同数字证书（这里即CA证书），一起发送给客户端。浏览器的"证书管理器"，有"受信任的根证书颁发机构"列表。客户端会根据这张列表，查看解开数字证书的公钥是否在列表之内。如果数字证书记载的网址，与你正在浏览的网址不一致，就说明这张证书可能被冒用，浏览器会发出警告。如果这张数字证书不是由受信任的机构颁发的，浏览器会发出另一种警告。如果数字证书是可靠的，客户端就可以使用**证书中的服务器公钥**，对信息进行加密，然后与服务器交换加密信息。

关于这块知识的扫盲可以看这篇：[数字证书及 CA 的扫盲介绍](https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html)

知乎：[数字签名、数字证书、SSL、https是什么关系？](https://www.zhihu.com/question/52493697)



**HTTP、HTTPS**

**CA证书的一个作用：**

通常，我们如果访问某些敏感的网页（比如用户登录的页面），其协议都会使用 HTTPS 而不是 HTTP。因为 HTTP 协议是明文的，一旦有坏人在偷窥你的网络通讯，他/她就可以看到网络通讯的内容（比如你的密码、银行帐号、等）；而 HTTPS 是加密的协议，可以保证你的传输过程中，坏蛋无法偷窥。

但是，千万不要以为，HTTPS 协议有了加密，就可高枕无忧了。举一个例子来说明，光有加密是不够滴。假设有一个坏人，搞了一个假的网银的站点，然后诱骗你上这个站点。假设你又比较单纯，一不留神，就把你的帐号，口令都输入进去了。那这个坏蛋的阴谋就得逞鸟。

为了防止坏人这么干，**HTTPS 协议除了有加密的机制，还有一套证书的机制**。通过证书来确保，某个站点确实就是某个站点。

有了证书之后，当你的浏览器在访问某个 HTTPS 网站时，会验证该站点上的 CA 证书。如果浏览器发现该证书没有问题（证书被某个根证书信任、证书上绑定的域名和该网站的域名一致、证书没有过期），那么页面就直接打开；否则的话，浏览器会给出一个警告，告诉你该网站的证书存在某某问题，是否继续访问该站点。

通过这篇文章 [也许，这样理解HTTPS更容易](https://mp.weixin.qq.com/s/C68icGtwh3IzuUbANaRXEg) 可以更加清楚数字证书、数字签名、对称加密、非对称加密等这些了。

最后看下这篇文章 [HTTPS科普扫盲帖 ](https://www.chyingp.com/posts/what-is-https/)相当对 HTTPS 涉及到的内容做了个总结。



